üìã PROMPT COMPLET √Ä COPIER

Plaintext

Agis comme un Expert Full Stack Developer (Node.js, React, TypeScript, PostgreSQL) et cr√©e une version Production-Ready, Multi-Utilisateurs, S√©curis√©e et Synchronis√©e en temps r√©el de mon application de Flashcards existante qui fonctionne actuellement uniquement en local (LocalStorage).

1. OBJECTIFS PRINCIPAUX

Backend & Base de Donn√©es : Remplace le localStorage par une vraie base de donn√©es PostgreSQL via drizzle-orm et expose une API Express. Les changements effectu√©s par les admins doivent se synchroniser instantan√©ment pour tous les utilisateurs.

Authentification Multi-Admin & R√¥les : Supporte plusieurs admins et diff√©rencie les utilisateurs admin / student. Les √©l√®ves ne peuvent que lire les flashcards. Les mots de passe doivent √™tre hach√©s avec bcrypt et l‚Äôauthentification s√©curis√©e via JWT ou sessions avec expiration.

Frontend : Conserve strictement le design actuel (Shadcn UI, Tailwind, Lucide React).

H√©bergement 24/7 : Configure un serveur Express qui sert l‚ÄôAPI et le frontend statique sur le m√™me port.

2. BASE DE DONN√âES

Cr√©e les tables suivantes avec drizzle-orm‚ÄØ:

users : id, username, password, role (admin/student).

packs : id, title, description, order, published.

flashcards : id, pack_id (FK), question, answer, order.

Relations : chaque flashcard appartient √† un pack.

3. AUTHENTIFICATION & S√âCURIT√â

Authentification via JWT ou sessions s√©curis√©es.

Hachage des mots de passe admins avec bcrypt.

Route /api/login v√©rifie si les identifiants correspondent √† un admin ou √©tudiant.

V√©rification des droits sur chaque route (CRUD packs/flashcards).

4. API & SYNCHRONISATION

Packs :

GET /api/packs (public : seulement publi√©s, admin : tous).

POST /api/packs, PUT /api/packs/:id, DELETE /api/packs/:id.

Flashcards :

GET /api/packs/:id/cards, POST, PUT, DELETE.

Temps r√©el : utilise WebSocket ou Server-Sent Events pour synchroniser automatiquement le frontend apr√®s chaque modification.

Validation : chaque payload valid√© c√¥t√© backend avec zod ou yup. Retour d‚Äôerreurs claires.

5. FRONTEND (React / TypeScript)

Remplace storage.ts par appels API avec TanStack Query.

G√©rer correctement les √©tats loading, error, success.

Pages cl√©s √† reproduire strictement‚ÄØ:

Home.tsx : Liste des packs publi√©s.

PackView.tsx : FlashcardViewer (question ‚Üí clic pour retourner ‚Üí r√©ponse).

AdminDashboard.tsx : Liste tous les packs, permet cr√©er/√©diter/supprimer, switch "Publi√©".

Header : affiche titre et boutons conditionnels Admin / Logout.

6. D√âPLOIEMENT

Cr√©e server/index.ts qui sert le frontend build + API.

Configuration .env pour JWT et secrets DB.

Script start dans package.json pour lancement serveur 24/7.

7. TESTS

V√©rifie auth, CRUD packs/flashcards, permissions multi-r√¥les.

Teste la synchronisation temps r√©el.

8. DESIGN & STYLE

Strictement identique au code source actuel : Shadcn UI, Tailwind, Lucide React.