Je veux amÃ©liorer le systÃ¨me de connexion avec une tolÃ©rance intelligente sur les champs nom et prÃ©nom.
Merci de lire le code du projet (backend + frontend) et dâ€™appliquer les modifications suivantes :

ğŸ¯ OBJECTIF

Faciliter la connexion :

ignorer les espaces inutiles

ignorer les majuscules/minuscules

accepter les variations dâ€™Ã©criture tant que le nom et prÃ©nom correspondent rÃ©ellement Ã  lâ€™utilisateur

Actuellement, lâ€™utilisateur doit taper exactement son nom et prÃ©nom.
Je veux supprimer cette contrainte inutile.

ğŸ”§ 1. Normalisation des champs (backend)

Lors de la connexion :

prendre firstname et lastname envoyÃ©s par le client

appliquer automatiquement :

.trim() (supprimer les espaces dÃ©but/fin)

.toLowerCase()

supprimer les doubles espaces intercalaires

remplacer plusieurs espaces par un seul

ignorer les majuscules/minuscules

Exemple de valeurs acceptÃ©es :

Camille, camille, CAMILLE, " camille "

Jean pierre, jean Pierre, JEAN PIERRE

Dans tous les cas â†’ correspond Ã  lâ€™utilisateur â€œJean Pierreâ€.

ğŸ—ƒï¸ 2. Correspondance avec la base (Drizzle ORM)

Modifier la requÃªte dâ€™authentification :

normaliser aussi les champs stockÃ©s en base

comparer lâ€™utilisateur via :
LOWER(TRIM(colonne)) = LOWER(TRIM(valeur envoyÃ©e))

Pas de changement sur la structure de base de donnÃ©es.

ğŸ” 3. Aucun changement sur le mot de passe

Le mot de passe doit rester strictement vÃ©rifiÃ© via bcrypt (ou Ã©quivalent), sans tolÃ©rance.

ğŸ–¥ï¸ 4. Frontend

Avant lâ€™envoi :

appliquer aussi normalisation cÃ´tÃ© client (optionnel, mais recommandÃ©)

Ã©viter que lâ€™utilisateur voie un message dâ€™erreur â€œidentifiants incorrectsâ€ juste Ã  cause dâ€™un espace ou dâ€™une majuscule

âš ï¸ 5. SÃ©curitÃ©

Ne jamais relÃ¢cher la sÃ©curitÃ© sur le mot de passe

La tolÃ©rance ne concerne que firstname et lastname

Si plusieurs utilisateurs ont le mÃªme nom/prÃ©nom normalized â†’ retourner une erreur propre (du style â€œplusieurs comptes trouvÃ©s, contactez lâ€™administrationâ€)

ğŸ§© 6. Ce que jâ€™attends de toi

Lire tout le code dâ€™authentification dÃ©jÃ  existant

Ajouter une fonction centralisÃ©e normalizeName()

Lâ€™utiliser dans :

le backend API login

Ã©ventuellement le frontend (avant submit)

Modifier proprement la requÃªte Drizzle

Montrer les diffs

Mettre Ã  jour le code final proprement

Merci de procÃ©der Ã©tape par Ã©tape.
Â»**